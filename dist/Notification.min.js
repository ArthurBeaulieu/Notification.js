class Notification{constructor(t){this.DEBUG=!0,this.DEBUG&&console.log("[ Notification ] constructor()",this),this._dismissAllLock=!1,this._dom=document.createElement("DIV"),this._active={},this._queue={},this._history=[],this._default={handler:{position:"top-right",thickBorder:"top",duration:5e3,transition:200,maxActive:10},notification:{type:"info",message:"",title:"",iconless:!1,closable:!0,sticky:!1,renderTo:this._dom,CBtitle:"",callback:null},color:{success:"rgb(76, 175, 80)",info:"rgb(3, 169, 244)",warning:"rgb(255, 152, 0)",error:"rgb(244, 67, 54)"}},this._position=void 0===t?this._default.handler.position:void 0===t.position?this._default.handler.position:t.position,this._thickBorder=void 0===t?this._default.handler.thickBorder:void 0===t.thickBorder?this._default.handler.thickBorder:t.thickBorder,this._duration=void 0===t?this._default.handler.duration:void 0===t.duration?this._default.handler.duration:t.duration,this._transition=void 0===t?this._default.handler.transition:void 0===t.transition?this._default.handler.transition:t.transition,this._maxActive=void 0===t?this._default.handler.maxActive:void 0===t.maxActive?this._default.handler.maxActive:t.maxActive,this.DEBUG&&"top-left"!==this._position&&"top-right"!==this._position&&"bottom-left"!==this._position&&"bottom-right"!==this._position&&(console.warn("[ Notification ] constructor() | Invalid value for position\nGiven position value of "+this._position+" has been replaced with "+this._default.handler.position),this._position=this._default.handler.position),this.DEBUG&&"top"!==this._thickBorder&&"bottom"!==this._thickBorder&&"left"!==this._thickBorder&&"right"!==this._thickBorder&&"none"!==this._thickBorder&&(console.warn("[ Notification ] constructor() | Invalid value for thickBorder\nGiven position value of "+this._thickBorder+" has been replaced with "+this._default.handler.position),this._thickBorder=this._default.handler.thickBorder),(this.DEBUG&&"number"!=typeof this._duration||this._duration<=0)&&(console.warn("[ Notification ] constructor() | Invalid value for duration\nGiven duration value of "+this._duration+"ms has been replaced with "+this._default.handler.duration+"ms"),this._duration=this._default.handler.duration),this.DEBUG&&this._duration<2*this._transition&&(console.warn("[ Notification ] constructor() | Invalid value for transition\nGiven transition value of "+this._transition+"ms has been replaced with "+this._default.handler.transition+"ms"),this._transition=this._default.handler.transition),(this.DEBUG&&"number"!=typeof this._maxActive||this._maxActive<=0)&&(console.warn("[ Notification ] constructor() | Invalid value for maxActive\nGiven maxActive value of "+this._maxActive+" has been replaced with "+this._default.handler.maxActive),this._maxActive=this._default.handler.maxActive),this._dom.classList.add("notification-container"),this._dom.classList.add(this._position),document.body.appendChild(this._dom)}dismiss(t){this.DEBUG&&console.log("[ Notification ] "+t+".dismis()"),window.clearTimeout(this._active[t].timeoutID),this._active[t].requestCount>1&&this._clearRequestCount(this._active[t]),this._close(this._active[t])}dismissAll(){if(this.DEBUG&&console.log("[ Notification ] dismisAll()"),!this._dismissAllLock&&0!==Object.keys(this._active).length){this._dismissAllLock=!0,this._queue={};for(let t in this._active)this.dismiss(t)}}dismissType(t){if(this.DEBUG&&console.log("[ Notification ] dismisType()"),0!==Object.keys(this._active).length)for(let i in this._active)this._active[i].type===t&&this.dismiss(i)}error(t){return this.DEBUG&&console.log("[ Notification ] error()"),t.type="error",this.new(t)}info(t){return this.DEBUG&&console.log("[ Notification ] info()"),t.type="info",this.new(t)}new(t){if(this.DEBUG&&console.log("[ Notification ] new()"),void 0===t||void 0===t.type||void 0===t.message||""===t.message)return void console.error("[ Notification ] new() | Notification type or message is undefined\nThose two fields are required to build a notification, check your .new() call");if(t.sticky&&!1===t.closable&&void 0===t.callback)return void console.error("[ Notification ] new() | Given options are that notification can not be closed and is a sticky one\nYou must provide a valid callback so there is a way to close the notification");this.DEBUG&&"info"!==t.type&&"success"!==t.type&&"warning"!==t.type&&"error"!==t.type&&(console.warn("[ Notification ] new() | Invalid value for type\nGiven type value of "+t.type+" has been replaced with "+this._default.notification.type),t.type=this._default.notification.type),this._dismissAllLock&&(this._dismissAllLock=!1);let i=this._buildUI({id:this._idGenerator(t.type+""+t.message,5),type:t.type,message:t.message,title:void 0===t.title?this._default.notification.title:t.title,duration:void 0===t.duration?this._duration:t.duration,iconless:void 0===t.iconless?this._default.notification.iconless:t.iconless,thickBorder:void 0===t.thickBorder?this._thickBorder:t.thickBorder,closable:void 0===t.closable?this._default.notification.closable:t.closable,sticky:void 0===t.sticky?this._default.notification.sticky:t.sticky,renderTo:void 0===t.renderTo?this._default.notification.renderTo:t.renderTo,CBtitle:void 0===t.CBtitle?this._default.notification.CBtitle:t.CBtitle,callback:void 0===t.callback?this._default.notification.callback:t.callback,isDimmed:!1});return this._active[i.id]?(this._resetTimeout(this._active[i.id]),this._incrementRequestCounter(this._active[i.id]),i={}):this._start(i),i.id}success(t){return this.DEBUG&&console.log("[ Notification ] success()"),t.type="success",this.new(t)}warning(t){return this.DEBUG&&console.log("[ Notification ] warning()"),t.type="warning",this.new(t)}_buildUI(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._buildUI() "),t.requestCount=1,t.totalRequestCount=1,t.dom=document.createElement("DIV"),t.dom.vector=document.createElement("DIV"),t.dom.text=document.createElement("DIV"),t.dom.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),t.dom.close=document.createElement("DIV"),t.dom.maintitle=document.createElement("H6"),t.dom.message=document.createElement("P");let i=document.createElementNS(t.dom.icon.namespaceURI,"path");switch(t.dom.classList.add("notification"),t.dom.vector.classList.add("vector-container"),t.dom.text.classList.add("text-container"),t.dom.close.classList.add("close"),t.thickBorder){case"top":t.dom.classList.add("top-border");break;case"bottom":t.dom.classList.add("bottom-border");break;case"left":t.dom.classList.add("left-border");break;case"right":t.dom.classList.add("right-border")}switch(t.dom.maintitle.innerHTML=t.title,t.dom.message.innerHTML=t.message,t.dom.close.innerHTML="&#x2716;",t.type){case"info":t.iconless||(i.setAttributeNS(null,"d","M 13,1.1875 C 6.476563,1.1875 1.1875,6.476563 1.1875,13 1.1875,19.523438 6.476563,24.8125 13,24.8125 19.523438,24.8125 24.8125,19.523438 24.8125,13 24.8125,6.476563 19.523438,1.1875 13,1.1875 z m 2.460938,18.308594 c -0.609375,0.238281 -1.09375,0.421875 -1.457032,0.546875 -0.363281,0.125 -0.78125,0.1875 -1.261718,0.1875 -0.734375,0 -1.308594,-0.179688 -1.71875,-0.539063 -0.40625,-0.355468 -0.609375,-0.8125 -0.609375,-1.367187 0,-0.214844 0.01563,-0.433594 0.04687,-0.65625 0.02734,-0.226563 0.07813,-0.476563 0.144531,-0.761719 l 0.761719,-2.6875 c 0.06641,-0.257812 0.125,-0.5 0.171875,-0.730469 0.04687,-0.230468 0.06641,-0.441406 0.06641,-0.632812 0,-0.339844 -0.07031,-0.582031 -0.210938,-0.714844 C 11.25,12.003906 10.980469,11.9375 10.582031,11.9375 c -0.195312,0 -0.398437,0.03125 -0.605468,0.08984 -0.207032,0.0625 -0.382813,0.121094 -0.53125,0.175781 L 9.648438,11.375 c 0.496093,-0.203125 0.972656,-0.375 1.429687,-0.519531 0.453125,-0.144531 0.886719,-0.21875 1.289063,-0.21875 0.730468,0 1.296875,0.179687 1.691406,0.53125 0.394531,0.351562 0.59375,0.8125 0.59375,1.375 0,0.117187 -0.01172,0.324219 -0.03906,0.617187 -0.02734,0.292969 -0.07813,0.5625 -0.152343,0.8125 l -0.757813,2.679688 c -0.0625,0.214844 -0.117187,0.460937 -0.167969,0.734375 -0.04687,0.273437 -0.07031,0.484375 -0.07031,0.625 0,0.355469 0.07813,0.601562 0.238281,0.730469 0.15625,0.128906 0.433594,0.191406 0.828125,0.191406 0.183594,0 0.390625,-0.03125 0.625,-0.09375 0.230469,-0.06641 0.398438,-0.121094 0.503906,-0.171875 z M 15.324219,8.617188 c -0.351563,0.328125 -0.777344,0.492187 -1.273438,0.492187 -0.496093,0 -0.925781,-0.164062 -1.28125,-0.492187 -0.355468,-0.328125 -0.53125,-0.726563 -0.53125,-1.191407 0,-0.464843 0.179688,-0.867187 0.53125,-1.199218 0.355469,-0.332032 0.785157,-0.496094 1.28125,-0.496094 0.496094,0 0.921875,0.164062 1.273438,0.496094 0.355469,0.332031 0.53125,0.734375 0.53125,1.199218 0,0.464844 -0.175781,0.863282 -0.53125,1.191407 z"),i.setAttribute("fill",this._default.color.info)),t.dom.classList.add("info");break;case"success":t.iconless||(i.setAttributeNS(null,"d","M 12.499783,0 C 5.5966693,0 0,5.596435 0,12.499784 c 0,6.903347 5.5966693,12.499782 12.499783,12.499782 6.903875,0 12.499783,-5.596435 12.499783,-12.499782 C 24.999566,5.596435 19.403424,0 12.499783,0 z m -2.292972,18.920678 -5.5039166,-5.503683 1.8344827,-1.834483 3.6694339,3.669201 8.255378,-8.2556122 1.834483,1.834483 -10.089861,10.0900942 z"),i.setAttribute("fill",this._default.color.success)),t.dom.classList.add("success");break;case"warning":t.iconless||(i.setAttributeNS(null,"d","M 24.729868,20.761932 13.783787,2.6088248 C 13.507151,2.1500377 13.010452,1.8695027 12.474673,1.8695027 c -0.53578,0 -1.032479,0.2804863 -1.309115,0.7393221 L 0.21957459,20.761932 c -0.28467704,0.472139 -0.29310722,1.061034 -0.0219769,1.541067 0.27113027,0.480082 0.77971881,0.776941 1.33104306,0.776941 H 23.420753 c 0.551324,0 1.059913,-0.296908 1.331043,-0.776941 0.27113,-0.480082 0.262749,-1.068928 -0.02193,-1.541067 z M 12.482859,8.148868 c 0.628658,0 1.160588,0.3546525 1.160588,0.9832615 0,1.9181345 -0.225666,4.6745605 -0.225666,6.5926955 0,0.49972 -0.548059,0.709207 -0.934922,0.709207 -0.515752,0 -0.951002,-0.209536 -0.951002,-0.709207 0,-1.918135 -0.225618,-4.674561 -0.225618,-6.5926955 0,-0.628609 0.515752,-0.9832615 1.17662,-0.9832615 z m 0.01613,11.879784 c -0.709208,0 -1.241187,-0.580269 -1.241187,-1.241137 0,-0.676997 0.53193,-1.241137 1.241187,-1.241137 0.660867,0 1.225056,0.56414 1.225056,1.241137 0,0.660868 -0.564189,1.241137 -1.225056,1.241137 z"),i.setAttribute("fill",this._default.color.warning)),t.dom.classList.add("warning");break;case"error":t.iconless||(i.setAttributeNS(null,"d","M 12.52501,0 C 9.198467,0 6.0711819,1.2953998 3.7190383,3.6475434 -1.1366543,8.5031605 -1.1366543,16.403869 3.7188874,21.259562 c 2.3521435,2.352219 5.4795796,3.647619 8.8061226,3.647619 3.326392,0 6.453828,-1.2954 8.805971,-3.647619 4.855693,-4.855693 4.855693,-12.7564015 0,-17.6120186 C 18.978838,1.2953998 15.851402,0 12.52501,0 z m 5.603813,18.057329 c -0.221145,0.22107 -0.510823,0.331642 -0.800577,0.331642 -0.289678,0 -0.579507,-0.110572 -0.800426,-0.331642 l -4.00281,-4.00266 -4.0027352,4.002735 c -0.2211455,0.22107 -0.5108236,0.331643 -0.8005771,0.331643 -0.2896781,0 -0.5795071,-0.110573 -0.8004262,-0.331643 -0.4422157,-0.442065 -0.4422157,-1.158939 0,-1.601079 L 10.923931,12.45359 6.921196,8.4508554 c -0.4422157,-0.4420647 -0.4422157,-1.1589386 0,-1.6010788 0.4420647,-0.4420648 1.1589386,-0.4420648 1.6010788,0 L 12.52501,10.852512 16.527593,6.8497766 c 0.442065,-0.4420648 1.158939,-0.4420648 1.60108,0 0.442215,0.4420647 0.442215,1.1589386 0,1.6010788 l -4.002585,4.0027346 4.002735,4.002659 c 0.442141,0.442141 0.442141,1.159015 0,1.60108 z"),i.setAttribute("fill",this._default.color.error)),t.dom.classList.add("error");break;default:t.iconless||(i.setAttributeNS(null,"d","M 13,1.1875 C 6.476563,1.1875 1.1875,6.476563 1.1875,13 1.1875,19.523438 6.476563,24.8125 13,24.8125 19.523438,24.8125 24.8125,19.523438 24.8125,13 24.8125,6.476563 19.523438,1.1875 13,1.1875 z m 2.460938,18.308594 c -0.609375,0.238281 -1.09375,0.421875 -1.457032,0.546875 -0.363281,0.125 -0.78125,0.1875 -1.261718,0.1875 -0.734375,0 -1.308594,-0.179688 -1.71875,-0.539063 -0.40625,-0.355468 -0.609375,-0.8125 -0.609375,-1.367187 0,-0.214844 0.01563,-0.433594 0.04687,-0.65625 0.02734,-0.226563 0.07813,-0.476563 0.144531,-0.761719 l 0.761719,-2.6875 c 0.06641,-0.257812 0.125,-0.5 0.171875,-0.730469 0.04687,-0.230468 0.06641,-0.441406 0.06641,-0.632812 0,-0.339844 -0.07031,-0.582031 -0.210938,-0.714844 C 11.25,12.003906 10.980469,11.9375 10.582031,11.9375 c -0.195312,0 -0.398437,0.03125 -0.605468,0.08984 -0.207032,0.0625 -0.382813,0.121094 -0.53125,0.175781 L 9.648438,11.375 c 0.496093,-0.203125 0.972656,-0.375 1.429687,-0.519531 0.453125,-0.144531 0.886719,-0.21875 1.289063,-0.21875 0.730468,0 1.296875,0.179687 1.691406,0.53125 0.394531,0.351562 0.59375,0.8125 0.59375,1.375 0,0.117187 -0.01172,0.324219 -0.03906,0.617187 -0.02734,0.292969 -0.07813,0.5625 -0.152343,0.8125 l -0.757813,2.679688 c -0.0625,0.214844 -0.117187,0.460937 -0.167969,0.734375 -0.04687,0.273437 -0.07031,0.484375 -0.07031,0.625 0,0.355469 0.07813,0.601562 0.238281,0.730469 0.15625,0.128906 0.433594,0.191406 0.828125,0.191406 0.183594,0 0.390625,-0.03125 0.625,-0.09375 0.230469,-0.06641 0.398438,-0.121094 0.503906,-0.171875 z M 15.324219,8.617188 c -0.351563,0.328125 -0.777344,0.492187 -1.273438,0.492187 -0.496093,0 -0.925781,-0.164062 -1.28125,-0.492187 -0.355468,-0.328125 -0.53125,-0.726563 -0.53125,-1.191407 0,-0.464843 0.179688,-0.867187 0.53125,-1.199218 0.355469,-0.332032 0.785157,-0.496094 1.28125,-0.496094 0.496094,0 0.921875,0.164062 1.273438,0.496094 0.355469,0.332031 0.53125,0.734375 0.53125,1.199218 0,0.464844 -0.175781,0.863282 -0.53125,1.191407 z"),i.setAttribute("fill",this._default.color.info)),t.dom.classList.add("info"),console.warn("[ Notification ] "+t.id+"._buildUI() | Invalid value for type\nGiven type value of "+t.type+" has been replaced with info")}if(t.iconless&&t.dom.message.classList.add("iconless-width"),t.iconless||(t.dom.icon.appendChild(i),t.dom.vector.appendChild(t.dom.icon)),t.dom.text.appendChild(t.dom.maintitle),t.dom.text.appendChild(t.dom.message),t.callback){let i=document.createElement("BUTTON");i.innerHTML=t.CBtitle,t.dom.text.appendChild(i);let e=this;i.addEventListener("click",()=>{e._close(t),t.callback()})}return t.iconless||t.dom.appendChild(t.dom.vector),t.dom.appendChild(t.dom.text),t.closable&&t.dom.appendChild(t.dom.close),t}_checkCounter(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._checkCounter()"),t.requestCount>1?this._decrementRequestCounter(t):t.renderTo.contains(t.dom)&&(window.clearTimeout(t.timeoutID),t.sticky?this._dim(t):this._close(t))}_clearRequestCount(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._clearRequestCount()"),t.requestCount=1,t.dom.removeChild(t.dom.counter),delete t.dom.counter}_close(t){if(this.DEBUG&&console.log("[ Notification ] "+t.id+"._close() "),t.isClosing)return;t.isClosing=!0,t.closed=Date.now(),t.effectiveDuration=t.closed-t.opened;let i=this,e=100;!function o(){if(e>=0&&(t.dom.style.opacity=e/100,0===--e))return i._updateHistory(t),t.renderTo.removeChild(t.dom),void(Object.keys(i._queue).length>0?(i._start(i._queue[Object.keys(i._queue)[0]]),delete i._queue[Object.keys(i._queue)[0]]):0===Object.keys(i._active).length&&(i._dismissAllLock=!1));window.setTimeout(o,i._transition/100)}()}_decrementRequestCounter(t,i){this.DEBUG&&console.log("[ Notification ] "+t.id+"._decrementRequestCounter()"),!t.sticky||i?(this._resetTimeout(t),--t.requestCount,t.requestCount>1?t.dom.counter.innerHTML=t.requestCount:(t.dom.removeChild(t.dom.counter),delete t.dom.counter)):t.isDimmed||this._dim(t)}_dim(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._dim()");let i=this,e=100;!function o(){if(e>=0&&(t.dom.style.opacity=e/100,50===--e&&t.sticky))return t.dom.style.opacity=.5,void(t.isDimmed=!0);window.setTimeout(o,i._transition/100)}()}_eventListener(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._eventListener()");let i=this,e=!1,o=()=>{t.isDimmed&&this._unDim(t)},s=()=>{void 0!==i._active[t.id]&&(t.requestCount>1?this._decrementRequestCounter(t,!0):e||(e=!0,window.clearTimeout(t.timeoutID),t.dom.close.removeEventListener("click",s),this._close(t)))};t.sticky&&(t.dom.addEventListener("mouseenter",o.bind(this)),t.dom.addEventListener("mouseout",o.bind(this))),t.closable&&(t.dom.addEventListener("click",s.bind(this)),t.dom.close.addEventListener("click",s.bind(this))),t.dom.addEventListener("mouseover",(()=>{void 0!==i._active[t.id]&&(e||t.isDimmed||i._resetTimeout(t))}).bind(this))}_idGenerator(t,i){let e=0,o="";if(!(0===t.length||i>12)){for(let i=0;i<t.length;++i)e=(e<<5)-e+(o=t.charCodeAt(i)),e|=0;return(Math.abs(e).toString(36)+""+Math.abs(e/2).toString(36).split("").reverse().join("")).substring(0,i).toUpperCase()}}_incrementRequestCounter(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._incrementRequestCounter()"),++t.requestCount,t.totalRequestCount<t.requestCount&&(t.totalRequestCount=t.requestCount),t.requestCount>1&&(t.dom.counter?t.dom.counter.innerHTML=t.requestCount:(t.dom.counter=document.createElement("DIV"),t.dom.counter.classList.add("counter"),t.dom.counter.innerHTML=t.requestCount,t.dom.appendChild(t.dom.counter))),t.sticky&&t.isDimmed&&this._unDim(t)}_open(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._open()"),"bottom-right"===this._position||"bottom-left"===this._position?t.renderTo.insertBefore(t.dom,t.renderTo.firstChild):t.renderTo.appendChild(t.dom),t.opened=Date.now();let i=this,e=0;!function o(){e<=100&&(t.dom.style.opacity=e/100,100===++e)?t.dom.style.opacity=1:window.setTimeout(o,i._transition/100)}()}_resetTimeout(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._resetTimeout()"),window.clearTimeout(t.timeoutID);let i=this;t.timeoutID=window.setTimeout(()=>{i._checkCounter(t)},t.duration)}_start(t){if(this.DEBUG&&console.log("[ Notification ] "+t.id+"._start()"),Object.keys(this._active).length>=this._maxActive)this._queue[t.id]=t;else{this._active[t.id]=t,this._eventListener(t),this._open(t);let i=this;t.timeoutID=window.setTimeout(()=>{i._checkCounter(t)},t.duration)}}_unDim(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._unDim()");let i=this,e=50;!function o(){if(e<=100&&(t.dom.style.opacity=e/100,100===++e))return t.dom.style.opacity=1,t.isDimmed=!1,void i._resetTimeout(t);window.setTimeout(o,i._transition/100)}()}_updateHistory(t){this.DEBUG&&console.log("[ Notification ] "+t.id+"._updateHistory()"),delete this._active[t.id];let i=JSON.parse(JSON.stringify(t));delete i.isClosing,delete i.isDimmed,delete i.requestCount,delete i.timeoutID,delete i.renderTo,delete i.dom,this._history.push(i)}getHistoryLength(){return this._history.length}getHistory(){return this._history}}